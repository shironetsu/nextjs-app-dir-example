# 「Next.js 13 app directory で記事投稿サイトを作ってみよう」を読む

[Next\.js 13 app directory で記事投稿サイトを作ってみよう](https://zenn.dev/azukiazusa/articles/next-js-app-dir-tutorial)


## 起動

```
info  - VS Code settings.json has been created for Next.js' automatic app types, this file can be added to .gitignore if desired
```

## `app/page.tsx` 編集

> ファイルを編集した後 http://localhost:3000/ にアクセスすると、以下のように表示が切り替わっていることが確認できます。

`layout.tsx` を残した状態だとスタイルが適用される。

## `app/articles/[slug]/page.tsx` 作成

`app/articles/[slug]/page.tsx` を作る。

> 将来的に params の型は TypeScript plugin により自動で生成されるようになる予定です。

気になる👀

## `app/layout.tsx` 編集

> Next.js は `<html>` や `<body>` タグを自動的に生成しないので、`app/layout.tsx` ファイルで必ず定義する必要があります。

へー。


ここで怒られる

```ts
export const metadata = {
           //^^^^^^^^ "metadata" is not a valid Next.js entry export value.
  title: "Create Next App",
  description: "Generated by create next app",
  themeColor: "#ffffff",
};
```

[Getting a TypeScript error: "metadata" is not a valid next\.js entry export value : r/nextjs](https://www.reddit.com/r/nextjs/comments/11xqy91/getting_a_typescript_error_metadata_is_not_a/)

気になるがのエラーでページの表示に影響していないので一旦放置。
"Next.js entry export value"ってTSのエラーとして検知できるの？

## Chakra UI 導入

```
npm i @chakra-ui/react @emotion/react@^11 @emotion/styled@^11 framer-motion@^6
```

## app/lauout.tsx に ChakraProvider を追加

```
./node_modules/@chakra-ui/accordion/dist/chunk-JDQBKIKM.mjs

You're importing a component that needs useState. It only works in a Client Component but none of its parents are marked with "use client", so they're Server Components by default.

    ,-[8:1]
  8 | import { useControllableState } from "@chakra-ui/react-use-controllable-state";
  9 | import { mergeRefs } from "@chakra-ui/react-use-merge-refs";
 10 | import { callAllHandlers, warn } from "@chakra-ui/shared-utils";
 11 | import { useCallback, useEffect, useId, useRef, useState } from "react";
    :                                                 ^^^^^^^^
 12 | function useAccordion(props) {
 13 |   const {
 14 |     onChange,
    `----

Maybe one of these should be marked as a client entry with "use client":
  node_modules\@chakra-ui\accordion\dist\chunk-JDQBKIKM.mjs
  node_modules\@chakra-ui\accordion\dist\index.mjs
  node_modules\@chakra-ui\react\dist\index.mjs
  app\layout.tsx
```

Server Component, `onClick`　すら使えないのか。テンプレートエンジンみたいだ。

## app/Provider.tsx 作成

`components` ディレクトリとかではなくて `page.tsx` と同階層に置いてしまう。

